{"remainingRequest":"/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/node_modules/babel-loader/lib/index.js!/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/src/pages/authority/sub/ResendMail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/src/pages/authority/sub/ResendMail.vue","mtime":1633509914000},{"path":"/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/node_modules/vue-loader-v16/dist/index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9oeXVuam9uZ2tpbS9Eb3dubG9hZHMvcGFydWxhXHUxMTBDXHUxMTYxXHUxMTA1XHUxMTZEXHUxMTAzXHUxMTczXHUxMUFGL3BhcnVsYS1mcm9udGVuZC9jbGllbnQtdjEuMC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCBXZWIzIGZyb20gIndlYjMiOwppbXBvcnQgV2FsbGV0U2VydmljZSBmcm9tICIuLi8uLi8uLi9zZXJ2aWNlcy93YWxsZXQuc2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JfbXNnOiAiIgogICAgfTsKICB9LAogIHByb3BzOiB7fSwKICBjb21wb25lbnRzOiB7fSwKICBtZXRob2RzOiB7CiAgICBvbkV4aXQ6IGZ1bmN0aW9uIG9uRXhpdCgpIHsKICAgICAgdGhpcy4kZW1pdCgnb25FeGl0Jyk7CiAgICB9LAogICAgb25SZXNlbmQ6IGZ1bmN0aW9uIG9uUmVzZW5kKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcGVybWlzc2lvbnMsIGFjY291bnRzUGVybWlzc2lvbiwgd2ViMywgZnJvbSwgbG9naW5fd2FsbGV0LCBleHBpcmVEYXRlLCBtc2dQYXJhbXMsIHN0ck1ldGhvZCwgcGFyYW1WYWxzLCByZXMsIHNpZ25hdHVyZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBldGhlcmV1bS5yZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnd2FsbGV0X3JlcXVlc3RQZXJtaXNzaW9ucycsCiAgICAgICAgICAgICAgICAgIHBhcmFtczogW3sKICAgICAgICAgICAgICAgICAgICBldGhfYWNjb3VudHM6IHt9CiAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcGVybWlzc2lvbnMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Blcm1pc3Npb25zOjonLCBwZXJtaXNzaW9ucyk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBwZXJtaXNzaW9ucy5maW5kKGZ1bmN0aW9uIChwZXJtaXNzaW9uKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBwZXJtaXNzaW9uLnBhcmVudENhcGFiaWxpdHkgPT09ICdldGhfYWNjb3VudHMnOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGFjY291bnRzUGVybWlzc2lvbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWNjb3VudHNQZXJtaXNzaW9uIiwgYWNjb3VudHNQZXJtaXNzaW9uKTsKCiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRzUGVybWlzc2lvbikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXRoX2FjY291bnRzIHBlcm1pc3Npb24gc3VjY2Vzc2Z1bGx5IHJlcXVlc3RlZCEnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB3ZWIzID0gbmV3IFdlYjMod2luZG93LndlYjMuY3VycmVudFByb3ZpZGVyKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiB3ZWIzLmV0aC5nZXRBY2NvdW50cygpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgZnJvbSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBsb2dpbl93YWxsZXQgPSBmcm9tWzBdOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImxvZ2luX3dhbGxldDo6IiwgbG9naW5fd2FsbGV0KTsKICAgICAgICAgICAgICAgIGV4cGlyZURhdGUgPSBuZXcgRGF0ZSgpOyAvLyBleHBpcmUgZGF0ZSBhZGQgMWRheQoKICAgICAgICAgICAgICAgIGV4cGlyZURhdGUuc2V0RGF0ZShleHBpcmVEYXRlLmdldERhdGUoKSArIDEpOwogICAgICAgICAgICAgICAgbXNnUGFyYW1zID0gInJlc2VuZF9jb25maXJtX21haWwgIi5jb25jYXQobG9naW5fd2FsbGV0LCAiICIpLmNvbmNhdChEYXRlLnBhcnNlKGV4cGlyZURhdGUpKTsKICAgICAgICAgICAgICAgIHN0ck1ldGhvZCA9ICdwZXJzb25hbF9zaWduJzsKICAgICAgICAgICAgICAgIHBhcmFtVmFscyA9IFttc2dQYXJhbXMsIGxvZ2luX3dhbGxldF07CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGFyYW1zOicsIHN0ck1ldGhvZCwgcGFyYW1WYWxzLCBsb2dpbl93YWxsZXQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgcmV0dXJuIHdlYjMuY3VycmVudFByb3ZpZGVyLnNlbmQoc3RyTWV0aG9kLCBwYXJhbVZhbHMpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHNpZ25hdHVyZSA9IHJlcy5yZXN1bHQ7CiAgICAgICAgICAgICAgICBXYWxsZXRTZXJ2aWNlLnJlc2VuZE1haWwobG9naW5fd2FsbGV0LCBtc2dQYXJhbXMsIHJlcy5yZXN1bHQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzOjonLCByZXMpOwogICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcl9tc2cgPSAnJzsKICAgICAgICAgICAgICAgICAgYWxlcnQoJ3Jlc2VuZCBtYWlsIGNvbXBsZXRlJyk7CiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAiLyI7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3JfbXNnID0gZXJyb3I7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhKSBfdGhpcy5lcnJvcl9tc2cgPSBlcnJvci5yZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgfSk7IC8vIGlmKHRoaXMuY2hlY2tlZE5hbWVzLmxlbmd0aCA9PSAyKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ3RoaXMuY2hlY2tlZE5hbWVzLmxlbmd0aCAnK3RoaXMuY2hlY2tlZE5hbWVzLmxlbmd0aCkKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLiRlbWl0KCdvbk5leHQnKQogICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiAKICAgICAgICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5lcnJvcl9tc2cgPSAiKlJlcXVpcmVkIGNvbnNlbnQgaXMgcmVxdWlyZWQgdG8gY29udGludWUuIgogICAgICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/hyunjongkim/Downloads/parula자료들/parula-frontend/client-v1.0/src/pages/authority/sub/ResendMail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"w-full h-full\">\r\n        <div class=\"w-full items-center\">\r\n        <div class=\"px-5\">\r\n            <div class=\"underline mr-3 font-semibold text-lg\">UNCONFIRMED ACCOUNT</div>\r\n            <div class=\" mt-5\">\r\n               <p class=\"text-sm Break All\">Please check your email\r\n                   If you do not receive an account confirmation email, please check your spam email or resend it.\r\n                </p>\r\n                \r\n            </div>\r\n            <p class=\"text-red-600 font-light text-sm my-5 transition duration-150 ease-in-out  \">{{error_msg}}</p>\r\n            <div class=\"w-full flex justify-end my-5\">\r\n                <button class=\"text-center py-1 px-5 text-black transition-colors duration-150 border border-black focus:shadow-outline hover:bg-black hover:text-white\" v-on:click=\"onResend\">Resend Mail</button>\r\n            </div>\r\n            <br>\r\n            <a href=\"javascript:;\" @click=\"onExit\" class=\"text-sm font-semibold\">&#60; back</a>\r\n        </div>\r\n         \r\n         </div>\r\n    </div> \r\n</template>\r\n\r\n<script>\r\nimport Web3 from \"web3\";\r\nimport WalletService from \"../../../services/wallet.service\";\r\nexport default {\r\n    data: function() {\r\n        return {\r\n            error_msg:\"\",\r\n        }\r\n    },\r\n     props: {\r\n    },\r\n    components: {\r\n    },\r\n    methods: {\r\n        onExit(){\r\n            this.$emit('onExit')\r\n        },\r\n        async onResend() {\r\n            const permissions = await ethereum.request({\r\n                method: 'wallet_requestPermissions',\r\n                params: [{\r\n                    eth_accounts: {}\r\n                }],\r\n            })\r\n            console.log('permissions::', permissions)\r\n\r\n            const accountsPermission = await permissions.find((permission) => permission.parentCapability === 'eth_accounts');\r\n            console.log(\"accountsPermission\", accountsPermission)\r\n            if (!accountsPermission) {\r\n                console.log('eth_accounts permission successfully requested!');\r\n            }\r\n\r\n            let web3 = new Web3(window.web3.currentProvider)\r\n            let from = await web3.eth.getAccounts();\r\n            const login_wallet = from[0]\r\n            console.log(\"login_wallet::\", login_wallet)\r\n\r\n            var expireDate = new Date();\r\n            // expire date add 1day\r\n            expireDate.setDate(expireDate.getDate() + 1);\r\n            const msgParams = `resend_confirm_mail ${login_wallet} ${ Date.parse(expireDate) }`\r\n\r\n            let strMethod = 'personal_sign'\r\n\r\n            let paramVals = [msgParams, login_wallet]\r\n            console.log('params:', strMethod, paramVals, login_wallet)\r\n\r\n            const res = await web3.currentProvider.send(strMethod, paramVals);\r\n            const signature = res.result;\r\n            \r\n            WalletService.resendMail(login_wallet, msgParams, res.result).then(res=>{\r\n                console.log('res::', res)\r\n                this.error_msg = '';\r\n                alert('resend mail complete')\r\n                location.href = \"/\";\r\n\r\n\r\n            }).catch(error=>{\r\n                this.error_msg = error\r\n                if(error.response && error.response.data)\r\n                    this.error_msg = error.response.data\r\n            })\r\n\r\n\r\n            // if(this.checkedNames.length == 2) {\r\n            //     console.log('this.checkedNames.length '+this.checkedNames.length)\r\n            //     this.$emit('onNext')\r\n            //     return \r\n            // } else {\r\n            //     this.error_msg = \"*Required consent is required to continue.\"\r\n            // }\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n</style>"],"sourceRoot":""}]}